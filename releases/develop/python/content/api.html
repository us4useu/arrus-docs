

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Reference &mdash; ARRUS (python) 0.5.0-dev documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Acknowledgments" href="misc/acknowledgments.html" />
    <link rel="prev" title="Examples" href="examples/mock_session_example.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> ARRUS (python)
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/mock_session_example.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#session">Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="#devices">Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#operations">Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#b-mode-imaging-tx-rx-sequences">B-mode imaging Tx/Rx sequences</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-tx-rx-sequences">Custom Tx/Rx sequences</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#output-data">Output data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#metadata">Metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#utility-functions">Utility functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#b-mode-imaging-pipeline">B-mode imaging pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging">Logging</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="misc/acknowledgments.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc/release_notes.html">Release notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARRUS (python)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>API Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-reference">
<span id="api-main"></span><h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="session">
<h2>Session<a class="headerlink" href="#session" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="arrus.Session">
<em class="property">class </em><code class="sig-prename descclassname">arrus.</code><code class="sig-name descname">Session</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cfg_path</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">medium</span><span class="p">:</span> <span class="n">arrus.medium.Medium</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mock</span><span class="p">:</span> <span class="n">dict</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.Session" title="Permalink to this definition">¶</a></dt>
<dd><p>A communication session with the ultrasound system.
Currently, only localhost session is available.</p>
<dl class="py method">
<dt id="arrus.Session.get_device">
<code class="sig-name descname">get_device</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.Session.get_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a device identified by a given id.</p>
<p>The available devices are determined by the initial session settings.</p>
<p>The handle to device is invalid after the session is closed
(i.e. the session object is disposed).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a path to the device</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a handle to device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="arrus.Session.set_current_medium">
<code class="sig-name descname">set_current_medium</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">medium</span><span class="p">:</span> <span class="n">arrus.medium.Medium</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.Session.set_current_medium" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a medium in the current session context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>medium</strong> – medium description to set</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="devices">
<h2>Devices<a class="headerlink" href="#devices" title="Permalink to this headline">¶</a></h2>
<p><strong>Do not create instances of the below classes directly</strong>. Use
<code class="docutils literal notranslate"><span class="pre">session.get_device</span></code> to acquire the appropriate device, for example:
<code class="docutils literal notranslate"><span class="pre">session.get_device('/Us4OEM:0')</span></code>.</p>
<dl class="py class">
<dt id="arrus.devices.us4r.Us4R">
<em class="property">class </em><code class="sig-prename descclassname">arrus.devices.us4r.</code><code class="sig-name descname">Us4R</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handle</span></em>, <em class="sig-param"><span class="n">parent_session</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.devices.us4r.Us4R" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">arrus.devices.device.Device</span></code></p>
<p>A handle to Us4R device.</p>
<p>Wraps an access to arrus.core.Us4R object.</p>
<dl class="py method">
<dt id="arrus.devices.us4r.Us4R.disable_hv">
<code class="sig-name descname">disable_hv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#arrus.devices.us4r.Us4R.disable_hv" title="Permalink to this definition">¶</a></dt>
<dd><p>Disables high voltage supplier.</p>
</dd></dl>

<dl class="py method">
<dt id="arrus.devices.us4r.Us4R.sampling_frequency">
<em class="property">property </em><code class="sig-name descname">sampling_frequency</code><a class="headerlink" href="#arrus.devices.us4r.Us4R.sampling_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Device sampling frequency [Hz].</p>
</dd></dl>

<dl class="py method">
<dt id="arrus.devices.us4r.Us4R.set_hv_voltage">
<code class="sig-name descname">set_hv_voltage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">voltage</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.devices.us4r.Us4R.set_hv_voltage" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables HV and sets a given voltage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>voltage</strong> – voltage to set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="arrus.devices.us4r.Us4R.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#arrus.devices.us4r.Us4R.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts uploaded tx/rx sequence execution.</p>
</dd></dl>

<dl class="py method">
<dt id="arrus.devices.us4r.Us4R.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#arrus.devices.us4r.Us4R.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops tx/rx sequence execution.</p>
</dd></dl>

<dl class="py method">
<dt id="arrus.devices.us4r.Us4R.upload">
<code class="sig-name descname">upload</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">seq</span><span class="p">:</span> <span class="n">arrus.ops.operation.Operation</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'sync'</span></em>, <em class="sig-param"><span class="n">rx_buffer_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">host_buffer_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">frame_repetition_interval</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#arrus.devices.us4r.HostBuffer" title="arrus.devices.us4r.HostBuffer">arrus.devices.us4r.HostBuffer</a><a class="headerlink" href="#arrus.devices.us4r.Us4R.upload" title="Permalink to this definition">¶</a></dt>
<dd><p>Uploads a given sequence of operations to perform on the device.</p>
<p>The host buffer returns Frame Channel Mapping in frame
acquisition context custom data dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seq</strong> – sequence to set</p></li>
<li><p><strong>mode</strong> – mode to set (str), available values: “sync”, “async”</p></li>
<li><p><strong>rx_buffer_size</strong> – the size of the buffer to set on the Us4R device,
should be None for “sync” version (value 2 will be used)</p></li>
<li><p><strong>host_buffer_size</strong> – the size of the buffer to create on the host
computer, should be None for “sync” version (value 2 will be used)</p></li>
<li><p><strong>frame_repetition_interval</strong> – the expected time between successive
frame acquisitions to set, should be None for “sync” version. None
value means that no interval should be set</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>ValueError when some of the input parameters are invalid</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a data buffer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="arrus.devices.gpu.GPU">
<em class="property">class </em><code class="sig-prename descclassname">arrus.devices.gpu.</code><code class="sig-name descname">GPU</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.devices.gpu.GPU" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">arrus.devices.device.Device</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="arrus.devices.cpu.CPU">
<em class="property">class </em><code class="sig-prename descclassname">arrus.devices.cpu.</code><code class="sig-name descname">CPU</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.devices.cpu.CPU" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">arrus.devices.device.Device</span></code></p>
</dd></dl>

</div>
<div class="section" id="operations">
<h2>Operations<a class="headerlink" href="#operations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="b-mode-imaging-tx-rx-sequences">
<h3>B-mode imaging Tx/Rx sequences<a class="headerlink" href="#b-mode-imaging-tx-rx-sequences" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="arrus.ops.imaging.LinSequence">
<em class="property">class </em><code class="sig-prename descclassname">arrus.ops.imaging.</code><code class="sig-name descname">LinSequence</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tx_aperture_center_element</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">tx_aperture_size</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">tx_focus</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">pulse</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#arrus.ops.us4r.Pulse" title="arrus.ops.us4r.Pulse">arrus.ops.us4r.Pulse</a></span></em>, <em class="sig-param"><span class="n">rx_aperture_center_element</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">rx_aperture_size</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">pri</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">downsampling_factor</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">rx_sample_range</span><span class="p">:</span> <span class="n">tuple</span></em>, <em class="sig-param"><span class="n">tgc_start</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">tgc_slope</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">speed_of_sound</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.ops.imaging.LinSequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">arrus.ops.operation.Operation</span></code></p>
<p>A sequence of Tx/Rx operations for classical beamforming (linear scanning).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx_aperture_center_element</strong> – vector of tx aperture center elements [element]</p></li>
<li><p><strong>tx_aperture_size</strong> – size of the tx aperture [element]</p></li>
<li><p><strong>rx_aperture_center_element</strong> – vector of rx aperture center elements [element]</p></li>
<li><p><strong>rx_aperture_size</strong> – size of the rx aperture [element]</p></li>
<li><p><strong>tx_focus</strong> – tx focal length [m]</p></li>
<li><p><strong>pulse</strong> – an excitation to perform</p></li>
<li><p><strong>pri</strong> – pulse repetition interval [s]</p></li>
<li><p><strong>downsampling_factor</strong> – downsampling factor (decimation), integer factor for decreasing sampling frequency of the output signal</p></li>
<li><p><strong>speed_of_sound</strong> – assumed speed of sound; can be None, in this case a medium in current context will be used to determine speed of sound [m/s]</p></li>
<li><p><strong>tgc_start</strong> – tgc starting gain [dB]</p></li>
<li><p><strong>tgc_slope</strong> – tgc gain slope [dB/m]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="custom-tx-rx-sequences">
<h3>Custom Tx/Rx sequences<a class="headerlink" href="#custom-tx-rx-sequences" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="arrus.ops.us4r.Pulse">
<em class="property">class </em><code class="sig-prename descclassname">arrus.ops.us4r.</code><code class="sig-name descname">Pulse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">center_frequency</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">n_periods</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">inverse</span><span class="p">:</span> <span class="n">bool</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.ops.us4r.Pulse" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A definition of the pulse that can be triggered by the us4r device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>center_frequency</strong> – pulse center frequency [Hz]</p></li>
<li><p><strong>n_periods</strong> – number of periods of the generated pulse, possible values: 0.5, 1, 1.5, …</p></li>
<li><p><strong>inverse</strong> – true if the signal amplitude should be reversed, false otherwise</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="arrus.ops.us4r.TxRx">
<em class="property">class </em><code class="sig-prename descclassname">arrus.ops.us4r.</code><code class="sig-name descname">TxRx</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tx</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#arrus.ops.us4r.Tx" title="arrus.ops.us4r.Tx">arrus.ops.us4r.Tx</a></span></em>, <em class="sig-param"><span class="n">rx</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#arrus.ops.us4r.Rx" title="arrus.ops.us4r.Rx">arrus.ops.us4r.Rx</a></span></em>, <em class="sig-param"><span class="n">pri</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.ops.us4r.TxRx" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Single atomic operation of pulse transmit and signal data reception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tx</strong> – signal transmit to perform</p></li>
<li><p><strong>rx</strong> – signal reception to perform</p></li>
<li><p><strong>pri</strong> – pulse repetition interval [s] - time to next event</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="arrus.ops.us4r.Tx">
<em class="property">class </em><code class="sig-prename descclassname">arrus.ops.us4r.</code><code class="sig-name descname">Tx</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">aperture</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">excitation</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#arrus.ops.us4r.Pulse" title="arrus.ops.us4r.Pulse">arrus.ops.us4r.Pulse</a></span></em>, <em class="sig-param"><span class="n">delays</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>numpy.ndarray<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.ops.us4r.Tx" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">arrus.ops.operation.Operation</span></code></p>
<p>Single atomic operation of a signal transmit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>aperture</strong> – a set of TX channels that should be enabled</p></li>
<li><p><strong>pulse</strong> – an excitation to perform</p></li>
<li><p><strong>delays</strong> – an array of delays to set to active elements. Should have the         shape (n_a,), where n_a is a number of active elements determined by         tx aperture. When None, firings are performed with no delay (delays=0) [s].</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="arrus.ops.us4r.Rx">
<em class="property">class </em><code class="sig-prename descclassname">arrus.ops.us4r.</code><code class="sig-name descname">Rx</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">aperture</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">sample_range</span><span class="p">:</span> <span class="n">tuple</span></em>, <em class="sig-param"><span class="n">downsampling_factor</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">padding</span><span class="p">:</span> <span class="n">tuple</span> <span class="o">=</span> <span class="default_value">(0, 0)</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.ops.us4r.Rx" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">arrus.ops.operation.Operation</span></code></p>
<p>Single atomic operation of echo data reception.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>aperture</strong> – a set of RX channels that should be enabled</p></li>
<li><p><strong>sample_range</strong> – a range of samples to acquire [start, end), starts from 0</p></li>
<li><p><strong>downsampling_factor</strong> – a sampling frequency divider. For example, if         nominal sampling frequency (fs) is equal to 65e6 Hz, <code class="docutils literal notranslate"><span class="pre">fs_divider=1</span></code>,        means to use the nominal fs, <code class="docutils literal notranslate"><span class="pre">fs_divider=2</span></code> means to use 32.5e6 Hz,         etc.</p></li>
<li><p><strong>padding</strong> – a pair of values (left, right); the left/right value means
how many zero-channels should be added from the left/right side of the
aperture. This parameter helps achieve a regular ndarray when
a sequence of Rxs has a non-constant aperture size (e.g. classical
beamforming).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="arrus.ops.us4r.TxRxSequence">
<em class="property">class </em><code class="sig-prename descclassname">arrus.ops.us4r.</code><code class="sig-name descname">TxRxSequence</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ops</span><span class="p">:</span> <span class="n">List<span class="p">[</span><a class="reference internal" href="#arrus.ops.us4r.TxRx" title="arrus.ops.us4r.TxRx">arrus.ops.us4r.TxRx</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">tgc_curve</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.ops.us4r.TxRxSequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A sequence of tx/rx operations to perform.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>operations</strong> – sequence of TX/RX operations to perform</p></li>
<li><p><strong>tgc_curve</strong> – TGC curve samples [dB]</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="arrus.ops.us4r.TxRxSequence.get_n_samples">
<code class="sig-name descname">get_n_samples</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#arrus.ops.us4r.TxRxSequence.get_n_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a set of number of samples that the Tx/Rx sequence defines.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="output-data">
<h2>Output data<a class="headerlink" href="#output-data" title="Permalink to this headline">¶</a></h2>
<p>An instance of the following class is returned by the <code class="docutils literal notranslate"><span class="pre">us4r.upload</span></code> function:</p>
<dl class="py class">
<dt id="arrus.devices.us4r.HostBuffer">
<em class="property">class </em><code class="sig-prename descclassname">arrus.devices.us4r.</code><code class="sig-name descname">HostBuffer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer_handle</span></em>, <em class="sig-param"><span class="n">fac</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#arrus.metadata.FrameAcquisitionContext" title="arrus.metadata.FrameAcquisitionContext">arrus.metadata.FrameAcquisitionContext</a></span></em>, <em class="sig-param"><span class="n">data_description</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#arrus.metadata.EchoDataDescription" title="arrus.metadata.EchoDataDescription">arrus.metadata.EchoDataDescription</a></span></em>, <em class="sig-param"><span class="n">frame_shape</span><span class="p">:</span> <span class="n">tuple</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.devices.us4r.HostBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Buffer storing data that comes from the us4r device.</p>
<p>The buffer is implemented as a circular queue. The consumer gets data from
the queue’s tails (end), the producer puts new data at the queue’s head
(firt element of the queue).</p>
<p>This class provides an access to the queue’s tail only. The user
can access the latest data produced by the device by accessing <cite>tail()</cite>
function. To release the tail data that is not needed anymore the user
can call <cite>release_tail()</cite> function.</p>
<dl class="py method">
<dt id="arrus.devices.us4r.HostBuffer.release_tail">
<code class="sig-name descname">release_tail</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.devices.us4r.HostBuffer.release_tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks the tail data as no longer needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> – timeout in milliseconds, None means infinite timeout</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="arrus.devices.us4r.HostBuffer.tail">
<code class="sig-name descname">tail</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.devices.us4r.HostBuffer.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns data available at the tail of the buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> – timeout in milliseconds, None means infinite timeout</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a pair: RF data, metadata</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="metadata">
<h3>Metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="arrus.metadata.Metadata">
<em class="property">class </em><code class="sig-prename descclassname">arrus.metadata.</code><code class="sig-name descname">Metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#arrus.metadata.FrameAcquisitionContext" title="arrus.metadata.FrameAcquisitionContext">arrus.metadata.FrameAcquisitionContext</a></span></em>, <em class="sig-param"><span class="n">data_desc</span><span class="p">:</span> <span class="n">arrus.metadata.DataDescription</span></em>, <em class="sig-param"><span class="n">custom</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.metadata.Metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Metadata describing the acquired data.</p>
<p>This class is immutable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>context</strong> – frame acquisition context</p></li>
<li><p><strong>data_desc</strong> – data characteristic</p></li>
<li><p><strong>custom</strong> – custom frame data (e.g. trigger counters, etc.)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="arrus.metadata.EchoDataDescription">
<em class="property">class </em><code class="sig-prename descclassname">arrus.metadata.</code><code class="sig-name descname">EchoDataDescription</code><span class="sig-paren">(</span><em class="sig-param">sampling_frequency: float</em>, <em class="sig-param">custom: dict = &lt;factory&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.metadata.EchoDataDescription" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">arrus.metadata.DataDescription</span></code></p>
<p>Data description of the ultrasound echo data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampling_frequency</strong> – a sampling frequency of the data</p></li>
<li><p><strong>custom</strong> – custom information</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="arrus.metadata.FrameAcquisitionContext">
<em class="property">class </em><code class="sig-prename descclassname">arrus.metadata.</code><code class="sig-name descname">FrameAcquisitionContext</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">device</span><span class="p">:</span> <span class="n">arrus.devices.device.UltrasoundDeviceDTO</span></em>, <em class="sig-param"><span class="n">sequence</span><span class="p">:</span> <span class="n">arrus.ops.operation.Operation</span></em>, <em class="sig-param"><span class="n">raw_sequence</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#arrus.ops.us4r.TxRxSequence" title="arrus.ops.us4r.TxRxSequence">arrus.ops.us4r.TxRxSequence</a></span></em>, <em class="sig-param"><span class="n">medium</span><span class="p">:</span> <span class="n">arrus.medium.MediumDTO</span></em>, <em class="sig-param"><span class="n">custom_data</span><span class="p">:</span> <span class="n">dict</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.metadata.FrameAcquisitionContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Metadata describing RF frame acquisition process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – ultrasound device specification</p></li>
<li><p><strong>sequence</strong> – a sequence that the user wanted to execute on the device</p></li>
<li><p><strong>raw_sequence</strong> – an actual Tx/Rx sequence that was uploaded on the system</p></li>
<li><p><strong>medium</strong> – description of the Medium assumed durring communication session with the device</p></li>
<li><p><strong>custom_data</strong> – a dictionary with custom data</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="utility-functions">
<h2>Utility functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="b-mode-imaging-pipeline">
<h3>B-mode imaging pipeline<a class="headerlink" href="#b-mode-imaging-pipeline" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="arrus.utils.imaging.Pipeline">
<em class="property">class </em><code class="sig-prename descclassname">arrus.utils.imaging.</code><code class="sig-name descname">Pipeline</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">steps</span></em>, <em class="sig-param"><span class="n">placement</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.utils.imaging.Pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Imaging pipeline.</p>
<p>Processes given data,metadata using a given sequence of steps.
The processing will be performed on a given device (‘placement’).</p>
</dd></dl>

<dl class="py class">
<dt id="arrus.utils.imaging.BandpassFilter">
<em class="property">class </em><code class="sig-prename descclassname">arrus.utils.imaging.</code><code class="sig-name descname">BandpassFilter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">numtaps</span><span class="o">=</span><span class="default_value">7</span></em>, <em class="sig-param"><span class="n">bounds</span><span class="o">=</span><span class="default_value">(0.5, 1.5)</span></em>, <em class="sig-param"><span class="n">filter_type</span><span class="o">=</span><span class="default_value">'butter'</span></em>, <em class="sig-param"><span class="n">num_pkg</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filter_pkg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.utils.imaging.BandpassFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Bandpass filtering to apply to signal data.</p>
<p>A bandwidth [0.5, 1.5]*center_frequency is currently used.</p>
<p>The filtering is performed along the last axis.</p>
<p>Currently only FIR filter is available.</p>
</dd></dl>

<dl class="py class">
<dt id="arrus.utils.imaging.QuadratureDemodulation">
<em class="property">class </em><code class="sig-prename descclassname">arrus.utils.imaging.</code><code class="sig-name descname">QuadratureDemodulation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">num_pkg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.utils.imaging.QuadratureDemodulation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Quadrature demodulation (I/Q decomposition).</p>
</dd></dl>

<dl class="py class">
<dt id="arrus.utils.imaging.Decimation">
<em class="property">class </em><code class="sig-prename descclassname">arrus.utils.imaging.</code><code class="sig-name descname">Decimation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">decimation_factor</span></em>, <em class="sig-param"><span class="n">cic_order</span></em>, <em class="sig-param"><span class="n">num_pkg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.utils.imaging.Decimation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Decimation + CIC (Cascade Integrator-Comb) filter.</p>
<p>See: <a class="reference external" href="https://en.wikipedia.org/wiki/Cascaded_integrator%E2%80%93comb_filter">https://en.wikipedia.org/wiki/Cascaded_integrator%E2%80%93comb_filter</a></p>
</dd></dl>

<dl class="py class">
<dt id="arrus.utils.imaging.RxBeamforming">
<em class="property">class </em><code class="sig-prename descclassname">arrus.utils.imaging.</code><code class="sig-name descname">RxBeamforming</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">num_pkg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.utils.imaging.RxBeamforming" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Rx beamforming.</p>
<p>Expected input data shape: n_emissions, n_rx, n_samples</p>
<p>Currently the beamforming op works only for LIN sequence output data.</p>
</dd></dl>

<dl class="py class">
<dt id="arrus.utils.imaging.EnvelopeDetection">
<em class="property">class </em><code class="sig-prename descclassname">arrus.utils.imaging.</code><code class="sig-name descname">EnvelopeDetection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">num_pkg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.utils.imaging.EnvelopeDetection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Envelope detection (Hilbert transform).</p>
<p>Currently this op works only for I/Q data (complex64).</p>
</dd></dl>

<dl class="py class">
<dt id="arrus.utils.imaging.Transpose">
<em class="property">class </em><code class="sig-prename descclassname">arrus.utils.imaging.</code><code class="sig-name descname">Transpose</code><a class="headerlink" href="#arrus.utils.imaging.Transpose" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Data transposition.</p>
</dd></dl>

<dl class="py class">
<dt id="arrus.utils.imaging.ScanConversion">
<em class="property">class </em><code class="sig-prename descclassname">arrus.utils.imaging.</code><code class="sig-name descname">ScanConversion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x_grid</span></em>, <em class="sig-param"><span class="n">z_grid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.utils.imaging.ScanConversion" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Scan conversion (interpolation to target mesh).</p>
<p>Currently linear interpolation is used by default, values outside
the input mesh will be set to 0.0.</p>
<p>Currently the op is implement for CPU only.
:param x_grid: a vector of grid points along OX axis [m]
:param z_grid: a vector of grid points along OZ axis [m]</p>
</dd></dl>

<dl class="py class">
<dt id="arrus.utils.imaging.LogCompression">
<em class="property">class </em><code class="sig-prename descclassname">arrus.utils.imaging.</code><code class="sig-name descname">LogCompression</code><a class="headerlink" href="#arrus.utils.imaging.LogCompression" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Converts to decibel scale.</p>
</dd></dl>

</div>
<div class="section" id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="arrus.set_clog_level">
<code class="sig-prename descclassname">arrus.</code><code class="sig-name descname">set_clog_level</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">level</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.set_clog_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets console log level output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>level</strong> – log level to use</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="arrus.add_log_file">
<code class="sig-prename descclassname">arrus.</code><code class="sig-name descname">add_log_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filepath</span></em>, <em class="sig-param"><span class="n">level</span></em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.add_log_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds message logging to given file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> – path to output log file</p></li>
<li><p><strong>level</strong> – severity level</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>The following log severity levels are available:
<code class="docutils literal notranslate"><span class="pre">arrus.logging.TRACE</span></code>,
<code class="docutils literal notranslate"><span class="pre">arrus.logging.DEBUG</span></code>,
<code class="docutils literal notranslate"><span class="pre">arrus.logging.INFO</span></code>,
<code class="docutils literal notranslate"><span class="pre">arrus.logging.WARNING</span></code>,
<code class="docutils literal notranslate"><span class="pre">arrus.logging.ERROR</span></code>,
<code class="docutils literal notranslate"><span class="pre">arrus.logging.FATAL</span></code></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="misc/acknowledgments.html" class="btn btn-neutral float-right" title="Acknowledgments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="examples/mock_session_example.html" class="btn btn-neutral float-left" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, us4us Ltd.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>