

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Reference &mdash; ARRUS (matlab) 0.8.0-dev20230717 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Acknowledgments" href="misc/acknowledgments.html" />
    <link rel="prev" title="Examples" href="examples.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> ARRUS (matlab)
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#high-level-matlab-scripts">High-level MATLAB scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utilities">Utilities</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="misc/acknowledgments.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc/release_notes.html">Release notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARRUS (matlab)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>API Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-reference">
<span id="arrus-api"></span><h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="high-level-matlab-scripts">
<span id="arrus-us4r"></span><h2>High-level MATLAB scripts<a class="headerlink" href="#high-level-matlab-scripts" title="Permalink to this headline">¶</a></h2>
<dl class="mat class">
<dt id="arrus.Us4R">
<em class="property">class </em><code class="sig-prename descclassname">arrus.</code><code class="sig-name descname">Us4R</code><span class="sig-paren">(</span><em class="sig-param">varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.Us4R" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">handle</span></code></p>
<p>A handle to the Us4R system.</p>
<p>This class provides functions to configure the system and perform
data acquisition using the Us4R.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configFile</strong> – name of the prototxt file containing setup information.</p></li>
<li><p><strong>logTime</strong> – set to true if you want to display acquisition and reconstruction time. Optional.</p></li>
</ul>
</dd>
</dl>
<dl class="mat method">
<dt id="arrus.Us4R.Us4R">
<code class="sig-name descname">Us4R</code><span class="sig-paren">(</span><em class="sig-param">varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.Us4R.Us4R" title="Permalink to this definition">¶</a></dt>
<dd><p>Input parser</p>
</dd></dl>

<dl class="mat method">
<dt id="arrus.Us4R.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#arrus.Us4R.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs uploaded operations in the us4R system.</p>
<p>Supports <code class="xref py py-class docutils literal notranslate"><span class="pre">CustomTxRxSequence</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Reconstruction</span></code>
implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>RF frame and reconstructed image (if <code class="xref py py-class docutils literal notranslate"><span class="pre">Reconstruction</span></code> operation was uploaded)</p>
</dd>
</dl>
</dd></dl>

<dl class="mat method">
<dt id="arrus.Us4R.runLoop">
<code class="sig-name descname">runLoop</code><span class="sig-paren">(</span><em class="sig-param">isContinue</em>, <em class="sig-param">callback</em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.Us4R.runLoop" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the uploaded operations in a loop.</p>
<p>Supports <code class="xref py py-class docutils literal notranslate"><span class="pre">CustomTxRxSequence</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Reconstruction</span></code> implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>isContinue</strong> – should the system continue executing the op? Takes no parameters and returns a boolean value.</p></li>
<li><p><strong>callback</strong> – a function to call after executing the operation. Should take one parameter, which will be feed with the output of the executed op.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="mat method">
<dt id="arrus.Us4R.runWithMetadata">
<code class="sig-name descname">runWithMetadata</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#arrus.Us4R.runWithMetadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs uploaded operations in the us4R system.</p>
<p>Supports <code class="xref py py-class docutils literal notranslate"><span class="pre">CustomTxRxSequence</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Reconstruction</span></code>
implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>RF frame, reconstructed image (if <code class="xref py py-class docutils literal notranslate"><span class="pre">Reconstruction</span></code> operation was uploaded) and metadata located in the first sample of the master module</p>
</dd>
</dl>
</dd></dl>

<dl class="mat method">
<dt id="arrus.Us4R.upload">
<code class="sig-name descname">upload</code><span class="sig-paren">(</span><em class="sig-param">sequenceOperation</em>, <em class="sig-param">reconstructOperation</em>, <em class="sig-param">enableHardwareProgramming</em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.Us4R.upload" title="Permalink to this definition">¶</a></dt>
<dd><p>Uploads operations to the us4R system.</p>
<p>Supports <code class="xref py py-class docutils literal notranslate"><span class="pre">CustomTxRxSequence</span></code>
and <code class="xref py py-class docutils literal notranslate"><span class="pre">Reconstruction</span></code> implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequenceOperation</strong> – TX/RX sequence to perform on the us4R system</p></li>
<li><p><strong>reconstructOperation</strong> – reconstruction to perform with the collected data</p></li>
<li><p><strong>enableHardwareProgramming</strong> – determines if the hardware</p></li>
</ul>
</dd>
</dl>
<p>is programmed or not (optional, default = true)
:returns: updated Us4R object</p>
</dd></dl>

</dd></dl>

<span class="target" id="arrus-customtxrxsequence"><span id="arrus-api-sequences"></span></span><dl class="mat class">
<dt id="arrus.CustomTxRxSequence">
<em class="property">class </em><code class="sig-prename descclassname">arrus.</code><code class="sig-name descname">CustomTxRxSequence</code><span class="sig-paren">(</span><em class="sig-param">varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.CustomTxRxSequence" title="Permalink to this definition">¶</a></dt>
<dd><p>A sequence of Tx/Rx operations to perform on a device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>txCenterElement</strong> – vector of tx aperture center elements [element]</p></li>
<li><p><strong>txApertureCenter</strong> – vector of tx aperture center positions [m]</p></li>
<li><p><strong>txApertureSize</strong> – vector of tx aperture sizes [element]</p></li>
<li><p><strong>rxCenterElement</strong> – vector of rx aperture center elements [element]</p></li>
<li><p><strong>rxApertureCenter</strong> – vector of rx aperture center positions [m].</p></li>
<li><p><strong>rxApertureSize</strong> – size of the rx aperture [element]</p></li>
<li><p><strong>txFocus</strong> – vector of tx focal lengths [m]</p></li>
<li><p><strong>txAngle</strong> – vector of tx angles [rad]</p></li>
<li><p><strong>speedOfSound</strong> – speed of sound for [m/s]</p></li>
<li><p><strong>txVoltage</strong> – tx voltage amplitude (Vpp/2) [V]</p></li>
<li><p><strong>txFrequency</strong> – vector of tx frequencies [Hz]</p></li>
<li><p><strong>txNPeriods</strong> – vector of numbers of sine periods in the tx burst (can be 0.5, 1, 1.5, etc.)</p></li>
<li><p><strong>rxDepthRange</strong> – defines the end (if scalar) or
the begining and the end (if two-element vector) 
of the acquisition expressed by depth range [m]</p></li>
<li><p><strong>rxNSamples</strong> – number of samples (if scalar) or 
starting and ending sample numbers (if 2-element vector) 
of recorded signal [sample]</p></li>
<li><p><strong>hwDdcEnable</strong> – enables complex iq output</p></li>
<li><p><strong>decimation</strong> – decimation factor, for real output (hwDdcEnable==false) it must be positive integer, for complex output (hwDdcEnable==true) it must be multiple of 0.25 and be &gt;=2</p></li>
<li><p><strong>nRepetitions</strong> – number of repetitions of the sequence (positive integer). Can be a string “max” – in this case, the maximum number of repetitions that can be performed on the system (taking into 
account the size of RAM, etc.) will be used.</p></li>
<li><p><strong>txPri</strong> – tx pulse repetition interval [s]</p></li>
<li><p><strong>tgcStart</strong> – TGC starting gain [dB]</p></li>
<li><p><strong>tgcSlope</strong> – TGC gain slope [dB/m]</p></li>
<li><p><strong>txInvert</strong> – tx pulse polarity marker</p></li>
</ul>
</dd>
</dl>
<p>TGC gain = tgcStart + tgcSlope * propagation distance
TGC gain is limited to 14-54 dB, any values out of that range
will be set to 54 dB (if &gt; 54 dB) or 14 dB (if &lt;14 dB)</p>
</dd></dl>

<span class="target" id="arrus-reconstruction"></span><dl class="mat class">
<dt id="arrus.Reconstruction">
<em class="property">class </em><code class="sig-prename descclassname">arrus.</code><code class="sig-name descname">Reconstruction</code><span class="sig-paren">(</span><em class="sig-param">varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.Reconstruction" title="Permalink to this definition">¶</a></dt>
<dd><p>A reconstruction operation to perform in the system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gridModeEnable</strong> – boolean, switches from line to grid reconstruction</p></li>
<li><p><strong>filterEnable</strong> – boolean, enable filtering the input signal</p></li>
<li><p><strong>filterACoeff</strong> – 1-D filter denominator coefficient</p></li>
<li><p><strong>filterBCoeff</strong> – 1-D filter numerator coefficient</p></li>
<li><p><strong>filterDelay</strong> – delay introduced by the filter [samples] (not implemented yet)</p></li>
<li><p><strong>swDdcEnable</strong> – boolean, enable software digital down convertion</p></li>
<li><p><strong>decimation</strong> – decimation factor</p></li>
<li><p><strong>xGrid</strong> – (1, width) vector, x-coordinates of the image pixels [m]</p></li>
<li><p><strong>zGrid</strong> – (1, depth) vector z-coordinates of the image pixels [m]</p></li>
<li><p><strong>sos</strong> – speed of sound used for reconstruction [m/s]</p></li>
<li><p><strong>rxApod</strong> – apodization window</p></li>
<li><p><strong>bmodeEnable</strong> – boolean, enable B-Mode reconstruction</p></li>
<li><p><strong>colorEnable</strong> – boolean, enable Color Doppler reconstruction and duplex imaging</p></li>
<li><p><strong>vectorEnable</strong> – boolean, enable Vector Doppler reconstruction and duplex imaging</p></li>
<li><p><strong>bmodeFrames</strong> – selects frames to be used in B-Mode reconstruction</p></li>
<li><p><strong>colorFrames</strong> – selects frames to be used in Color Doppler reconstruction</p></li>
<li><p><strong>vector0Frames</strong> – selects frames to be used in Vector Doppler reconstruction as 1st projection</p></li>
<li><p><strong>vector1Frames</strong> – selects frames to be used in Vector Doppler reconstruction as 2nd projection</p></li>
<li><p><strong>bmodeRxTangLim</strong> – array (K*, 2) of rx tangent limits for B-Mode</p></li>
<li><p><strong>colorRxTangLim</strong> – array (M*, 2) of rx tangent limits for Color Doppler</p></li>
<li><p><strong>vector0RxTangLim</strong> – array (N*, 2) of rx tangent limits for Vector Doppler (1st projection)</p></li>
<li><p><strong>vector1RxTangLim</strong> – array (N*, 2) of rx tangent limits for Vector Doppler (2nd projection)</p></li>
<li><p><strong>wcFilterACoeff</strong> – 1-D filter denominator coefficient (Wall Clutter Filter for Color/Vector Doppler)</p></li>
<li><p><strong>wcFilterBCoeff</strong> – 1-D filter numerator coefficient (Wall Clutter Filter for Color/Vector Doppler)</p></li>
<li><p><strong>wcFiltInitSize</strong> – number of initial filter output samples to be rejected</p></li>
</ul>
</dd>
</dl>
<ul class="simple">
<li><p>K, M, N - length of bmodeFrames, colorFrames, and vector0Frames or vector1Frames, respectively.</p></li>
</ul>
</dd></dl>

</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<span class="target" id="arrus-bmodedisplay"></span><dl class="mat class">
<dt id="arrus.BModeDisplay">
<em class="property">class </em><code class="sig-prename descclassname">arrus.</code><code class="sig-name descname">BModeDisplay</code><span class="sig-paren">(</span><em class="sig-param">varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.BModeDisplay" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">handle</span></code></p>
<p>A B-mode image display.</p>
<p>Currently is implemented as a simple MATLAB figure with dynamically
updated content.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reconstructionObject</strong> – object of class “Reconstruction” (obligatory input unless old syntax is used)</p></li>
<li><p><strong>dynamicRange</strong> – two-element vector [min, max], dynamic range limits to apply (optional name-value argument)</p></li>
<li><p><strong>cineLoopLength</strong> – positive scalar, number of frames stored in cineloop (optional name-value argument)</p></li>
<li><p><strong>persistence</strong> – persistence filtration weights (vector) or length (scalar) (optional name-value argument)</p></li>
<li><p><strong>bmodeTgc</strong> – applies linear TGC from 0 at top to bmodeTgc[dB] at bottom of the image (scalar) (optional name-value argument)</p></li>
<li><p><strong>bmodeAutoTgcResp</strong> – applies linear TGC that adapts in time to the imaging conditions, defines the responsiveness of the adaptation (0-no adaptation, 1-instant adaptation), &lt;0,1&gt; (scalar) (optional name-value argument)</p></li>
</ul>
</dd>
</dl>
<p>Old syntax (won’t be supported in future releases):
:param xGrid: (1, width) vector, x-coordinates of the image pixels [m]
:param zGrid: (1, depth) vector z-coordinates of the image pixels [m]
:param dynamicRange: two-element vector [min, max], value lims to apply</p>
<p>BModeDisplay class includes a cineloop buffer. The content of the buffer can be accessed through the getCineLoop method.</p>
<dl class="mat method">
<dt id="arrus.BModeDisplay.BModeDisplay">
<code class="sig-name descname">BModeDisplay</code><span class="sig-paren">(</span><em class="sig-param">varargin</em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.BModeDisplay.BModeDisplay" title="Permalink to this definition">¶</a></dt>
<dd><p>Input parser</p>
</dd></dl>

<dl class="mat method">
<dt id="arrus.BModeDisplay.isOpen">
<code class="sig-name descname">isOpen</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#arrus.BModeDisplay.isOpen" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the window was not already closed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>true when the windows with b-mode image was not closed,
false otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="mat method">
<dt id="arrus.BModeDisplay.updateImg">
<code class="sig-name descname">updateImg</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#arrus.BModeDisplay.updateImg" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates currently displayed image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – bmode data to display</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="misc/acknowledgments.html" class="btn btn-neutral float-right" title="Acknowledgments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="examples.html" class="btn btn-neutral float-left" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2023, us4us Ltd.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>