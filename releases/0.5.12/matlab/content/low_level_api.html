

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Us4MEX API &mdash; ARRUS (matlab) 0.5.12 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ARRUS (matlab)
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/bmode_imaging.html">B-mode Imaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>
<p><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="misc/acknowledgments.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc/release_notes.html">Release notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARRUS (matlab)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Us4MEX API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="us4mex-api">
<h1>Us4MEX API<a class="headerlink" href="#us4mex-api" title="Permalink to this headline">¶</a></h1>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The API is deprecated and will be removed in the future. We encourage you
to use API described here: <a class="reference internal" href="api.html#arrus-api-main"><span class="std std-ref">API Reference</span></a>.</p>
</div>
<section id="general-formula">
<h2>General formula<a class="headerlink" href="#general-formula" title="Permalink to this headline">¶</a></h2>
<p>Use <code class="docutils literal notranslate"><span class="pre">Us4MEX</span></code> MATLAB function to communicate with the provided hardware. This function allows to perform some particular <strong>operation</strong> with
given <strong>parameters</strong> on a selected <strong>us4OEM module</strong> (a card).</p>
<p>Before calling <code class="docutils literal notranslate"><span class="pre">Us4MEX</span></code> function make sure that a variable <code class="docutils literal notranslate"><span class="pre">nUs4OEM</span></code> is set in you current workspace and is equal
to the number of available modules.</p>
<dl class="mat function">
<dt id="Us4MEX">
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">operation</span></em>, <em class="sig-param"><span class="pre">varargin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#Us4MEX" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes an operation on a module with a given index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>moduleIndex</strong> – index of a module, on which operation should be performed</p></li>
<li><p><strong>operation</strong> – a name of an operation (string) to perform</p></li>
<li><p><strong>varargin</strong> – a list of parameters</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="system-configuration">
<h2>System configuration<a class="headerlink" href="#system-configuration" title="Permalink to this headline">¶</a></h2>
<section id="setrxchannelmapping">
<span id="mex-setrxchannelmapping"></span><h3>SetRxChannelMapping<a class="headerlink" href="#setrxchannelmapping" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetRxChannelMapping&quot;</span></em>, <em class="sig-param"><span class="pre">mapping</span></em>, <em class="sig-param"><span class="pre">rxMapId</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets RX mapping from the source (module’s) channel to the destination (Probe’s) channel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mapping</strong> – 32-element vector with channel mapping. mapping[source channel] = destination channel.</p></li>
<li><p><strong>rxMapId</strong> – mapping index</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="settxchannelmapping">
<span id="mex-settxchannelmapping"></span><h3>SetTxChannelMapping<a class="headerlink" href="#settxchannelmapping" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetTxChannelMapping&quot;</span></em>, <em class="sig-param"><span class="pre">srcChannel</span></em>, <em class="sig-param"><span class="pre">dstChannel</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets TX mapping from the source (module’s) channel to the destination (Probe’s) channel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srcChannel</strong> – source channel number</p></li>
<li><p><strong>dstChannel</strong> – destination channel number</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="high-voltage-supplier">
<h2>High voltage supplier<a class="headerlink" href="#high-voltage-supplier" title="Permalink to this headline">¶</a></h2>
<section id="enablehv">
<span id="mex-enablehv"></span><h3>EnableHV<a class="headerlink" href="#enablehv" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;EnableHV&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Enables High Voltage supplier.</p>
</dd></dl>

</section>
<section id="disablehv">
<span id="mex-disablehv"></span><h3>DisableHV<a class="headerlink" href="#disablehv" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;DisableHV&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Disables High Voltage supplier.</p>
</dd></dl>

</section>
<section id="sethvvoltage">
<span id="mex-sethvvoltage"></span><h3>SetHVVoltage<a class="headerlink" href="#sethvvoltage" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetHVVoltage&quot;</span></em>, <em class="sig-param"><span class="pre">voltage</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets HV voltage, available values are from range: 0-90 [0.5*Vpp], for example setting value 40 means setting 80 Vpp.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>voltage</strong> – voltage to set, [0.5*Vpp]</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="programming-tx-rx-sequence">
<h2>Programming TX/RX sequence<a class="headerlink" href="#programming-tx-rx-sequence" title="Permalink to this headline">¶</a></h2>
<section id="setnumberoffirings">
<span id="mex-setnumberoffirings"></span><h3>SetNumberOfFirings<a class="headerlink" href="#setnumberoffirings" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetNumberOfFirings&quot;</span></em>, <em class="sig-param"><span class="pre">numberOfFirings</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets number firings/acquisitions for new TX/RX sequence. For each firing/acquisition a different TX/RX parameters can be applied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>numberOfFirings</strong> – number of firings to set</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="settxdelay">
<span id="mex-settxdelay"></span><h3>SetTxDelay<a class="headerlink" href="#settxdelay" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetTxDelay&quot;</span></em>, <em class="sig-param"><span class="pre">channel</span></em>, <em class="sig-param"><span class="pre">delay</span></em>, <em class="sig-param"><span class="pre">firingIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets TX delay for a given channel. Returns an exact delay value that has been set on a give module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channel</strong> – channel number, <strong>starts from 1</strong></p></li>
<li><p><strong>delay</strong> – delay to set in seconds (double)</p></li>
<li><p><strong>firingIndex</strong> – a firing, in which the delay should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an exact delay value that was set for a given channel</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="settxdelays">
<span id="mex-settxdelays"></span><h3>SetTxDelays<a class="headerlink" href="#settxdelays" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetTxDelays&quot;</span></em>, <em class="sig-param"><span class="pre">delays</span></em>, <em class="sig-param"><span class="pre">firingIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets delays on the whole TX aperture. Returns an array of delays that has been set on a given module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>delays</strong> – an array of delays to set (with a length the same as the number of available TX channels), in seconds</p></li>
<li><p><strong>firingIndex</strong> – a firing, in which the delays should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an array of delays that has been set on a given module.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="settxfrequency">
<span id="mex-settxfrequency"></span><h3>SetTxFrequency<a class="headerlink" href="#settxfrequency" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetTxFrequency&quot;</span></em>, <em class="sig-param"><span class="pre">frequency</span></em>, <em class="sig-param"><span class="pre">firingIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets TX frequency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frequency</strong> – frequency to set in Hz</p></li>
<li><p><strong>firingIndex</strong> – a firing, in which the parameter value should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an exact value of TX frequency that was set on given module</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="settxhalfperiods">
<span id="mex-settxhalfperiods"></span><h3>SetTxHalfPeriods<a class="headerlink" href="#settxhalfperiods" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetTxHalfPeriods&quot;</span></em>, <em class="sig-param"><span class="pre">nPeriods</span></em>, <em class="sig-param"><span class="pre">firingIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets number of TX signal half-periods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nPeriods</strong> – number of half-periods to set</p></li>
<li><p><strong>firingIndex</strong> – a firing, in which the parameter value should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an exact number of half-periods that has been set on a given module</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="setrxaperture">
<span id="mex-setrxaperture"></span><h3>SetRxAperture<a class="headerlink" href="#setrxaperture" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetRxAperture&quot;</span></em>, <em class="sig-param"><span class="pre">origin</span></em>, <em class="sig-param"><span class="pre">size</span></em>, <em class="sig-param"><span class="pre">acqIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets RX aperture’s origin and size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin</strong> – origin of the aperture</p></li>
<li><p><strong>size</strong> – size of the aperture</p></li>
<li><p><strong>acqIndex</strong> – an acquisition, in which the parameter value should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetRxAperture&quot;</span></em>, <em class="sig-param"><span class="pre">aperture</span></em>, <em class="sig-param"><span class="pre">acqIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets RX aperture.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>aperture</strong> – a mask - string of zeros and ones, ‘1’ means to turn on a channel on a given position, ‘0’ - turn off</p></li>
<li><p><strong>acqIndex</strong> – an acquisition, in which the parameter value should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="settxaperture">
<span id="mex-settxaperture"></span><h3>SetTxAperture<a class="headerlink" href="#settxaperture" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetTxAperture&quot;</span></em>, <em class="sig-param"><span class="pre">origin</span></em>, <em class="sig-param"><span class="pre">size</span></em>, <em class="sig-param"><span class="pre">firingIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets TX aperture’s origin and size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin</strong> – origin of the aperture (starting from one)</p></li>
<li><p><strong>size</strong> – size of the aperture</p></li>
<li><p><strong>firingIndex</strong> – a firing, in which the parameter value should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetTxAperture&quot;</span></em>, <em class="sig-param"><span class="pre">aperture</span></em>, <em class="sig-param"><span class="pre">firingIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets TX aperture.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>aperture</strong> – a mask - string of zeros and ones, ‘1’ means to turn on a channel on a given position, ‘0’ - turn off</p></li>
<li><p><strong>firingIndex</strong> – a firing, in which the parameter value should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="setrxtime">
<span id="mex-setrxtime"></span><h3>SetRxTime<a class="headerlink" href="#setrxtime" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetRxTime&quot;</span></em>, <em class="sig-param"><span class="pre">time</span></em>, <em class="sig-param"><span class="pre">acqIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets length of acquisition time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> – expected acquisition time, in seconds</p></li>
<li><p><strong>acqIndex</strong> – an acquisition, in which the parameter value should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="settxinvert">
<span id="mex-settxinvert"></span><h3>SetTxInvert<a class="headerlink" href="#settxinvert" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetTxInvert&quot;</span></em>, <em class="sig-param"><span class="pre">onoff</span></em>, <em class="sig-param"><span class="pre">firingIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Enables/disables inversion of TX signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>onoff</strong> – enable/disable inversion</p></li>
<li><p><strong>firingIdx</strong> – a firing, in which the parameters values should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="settxcw">
<span id="mex-settxcw"></span><h3>SetTxCw<a class="headerlink" href="#settxcw" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetTxCw&quot;</span></em>, <em class="sig-param"><span class="pre">onoff</span></em>, <em class="sig-param"><span class="pre">firingIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Enables/disables generation of long TX bursts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>onoff</strong> – enable/disable</p></li>
<li><p><strong>firingIdx</strong> – a firing, in which the parameters values should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="setrxdelay">
<span id="mex-setrxdelay"></span><h3>SetRxDelay<a class="headerlink" href="#setrxdelay" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetRxDelay&quot;</span></em>, <em class="sig-param"><span class="pre">delay</span></em>, <em class="sig-param"><span class="pre">acqIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets the starting point of the acquisition time [s].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>delay</strong> – expected acquisition time starting point relative to trigger [s]</p></li>
<li><p><strong>acqIndex</strong> – an acquisition, in which the parameter value should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="setactivechannelgroup">
<span id="mex-setactivechannelgroup"></span><h3>SetActiveChannelGroup<a class="headerlink" href="#setactivechannelgroup" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetActiveChannelGroup&quot;</span></em>, <em class="sig-param"><span class="pre">group</span></em>, <em class="sig-param"><span class="pre">firingIndex</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets active channel groups.
Channel is active when it is TX/RX/CLAMP state. Channel is inactive when in HIZ state.
Single group has 8 channels (single pulser).</p>
<p>The user has to provide a string bitmask (MSB order); value 1 in the bitmask activates given group of channels.</p>
<div class="line-block">
<div class="line">[0]  - channels 0-7</div>
<div class="line">[4]  - channels 8-15</div>
<div class="line">[8]  - channels 16-23</div>
<div class="line">[12] - channels 24-31</div>
<div class="line">[1]  - channels 64-71</div>
<div class="line">[5]  - channels 72-79</div>
<div class="line">[9]  - channels 80-87</div>
<div class="line">[13] - channels 88-95</div>
<div class="line">[2]  - channels 32-39</div>
<div class="line">[6]  - channels 40-47</div>
<div class="line">[10] - channels 48-55</div>
<div class="line">[14] - channels 56-63</div>
<div class="line">[3]  - channels 96-103</div>
<div class="line">[7]  - channels 104-111</div>
<div class="line">[11] - channels 112-119</div>
<div class="line">[15] - channels 120-127</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> – string bitmask specifying active channel groups on given arius module.</p></li>
<li><p><strong>firingIndex</strong> – a firing, in which the parameter value should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="rx-settings">
<h2>RX settings<a class="headerlink" href="#rx-settings" title="Permalink to this headline">¶</a></h2>
<section id="setpgagain">
<span id="mex-setpgagain"></span><h3>SetPGAGain<a class="headerlink" href="#setpgagain" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetPGAGain&quot;</span></em>, <em class="sig-param"><span class="pre">gain</span></em><span class="sig-paren">)</span></dt>
<dd><p>Configures programmable-gain amplifier (PGA).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>gain</strong> – gain to set (<strong>string</strong>); available values: “24dB”, “30dB”</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="setlnagain">
<span id="mex-setlnagain"></span><h3>SetLNAGain<a class="headerlink" href="#setlnagain" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetLNAGain&quot;</span></em>, <em class="sig-param"><span class="pre">gain</span></em><span class="sig-paren">)</span></dt>
<dd><p>Configures low-noise amplifier (LNA) gain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>gain</strong> – gain to set (<strong>string</strong>); available values: “12dB”, “18dB”, “24dB”</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="setdtgc">
<span id="mex-setdtgc"></span><h3>SetDTGC<a class="headerlink" href="#setdtgc" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetDTGC&quot;</span></em>, <em class="sig-param"><span class="pre">isEnabled</span></em>, <em class="sig-param"><span class="pre">attenuation</span></em><span class="sig-paren">)</span></dt>
<dd><p>Configures digital time gain compensation (TGC).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>isEnabled</strong> – whether to enable (string “EN”) or disable (string “DIS”) time gain compensation</p></li>
<li><p><strong>attenuation</strong> – attenuation to set (<strong>string</strong>); available values: “0dB”, “6dB”, “12dB”, “18dB”, “24dB”, “30dB”, “36dB”, “42dB”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="tgcenable">
<span id="mex-tgcenable"></span><h3>TGCEnable<a class="headerlink" href="#tgcenable" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;TGCEnable&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Enables time gain compensation (TGC).</p>
</dd></dl>

</section>
<section id="tgcdisable">
<span id="mex-tgcdisable"></span><h3>TGCDisable<a class="headerlink" href="#tgcdisable" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;TGCDisable&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Disables time gain compensation (TGC).</p>
</dd></dl>

</section>
<section id="tgcsetsamples">
<span id="mex-tgcsetsamples"></span><h3>TGCSetSamples<a class="headerlink" href="#tgcsetsamples" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;TGCSetSamples&quot;</span></em>, <em class="sig-param"><span class="pre">samples</span></em>, <em class="sig-param"><span class="pre">firing</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets samples for a time gain compensation (TGC).</p>
<p>TGC curve sampling rate is equal 1MHz.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>samples</strong> – a vector of samples to set. Samples range from 0.0 (min gain) to 1.0 (max gain). Max vector length is 1022.</p></li>
<li><p><strong>firing</strong> – a firing, in which the this TGC should apply, <strong>starts from 0</strong>. NOT USED WITH THE CURRENT FIRMWARE.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="setlpfcutoff">
<span id="mex-setlpfcutoff"></span><h3>SetLPFCutoff<a class="headerlink" href="#setlpfcutoff" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetLPFCutoff&quot;</span></em>, <em class="sig-param"><span class="pre">cutoffFrequency</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets low-pass filter (LPF) cutoff frequency</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cutoffFrequency</strong> – cutoff frequency to set (<strong>string</strong>), available values: “10MHz”, “15MHz”, “20MHz”,
“30MHz”, “35MHz”, “50MHz”</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="setactivetermination">
<span id="mex-setactivetermination"></span><h3>SetActiveTermination<a class="headerlink" href="#setactivetermination" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetActiveTermination&quot;</span></em>, <em class="sig-param"><span class="pre">isEnabled</span></em>, <em class="sig-param"><span class="pre">value</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets active termination.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>isEnabled</strong> – whether to enable (string “EN”) or disable (string “DIS”) active termination</p></li>
<li><p><strong>value</strong> – active termination value to set (<strong>string</strong>), available: “50”, “100”, “200”, “400”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="managing-data-acquisition">
<h2>Managing data acquisition<a class="headerlink" href="#managing-data-acquisition" title="Permalink to this headline">¶</a></h2>
<section id="clearscheduledreceive">
<span id="mex-clearscheduledreceive"></span><h3>ClearScheduledReceive<a class="headerlink" href="#clearscheduledreceive" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;ClearScheduledReceive&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Clears a queue of RX tasks, should be called before defining any new TX/RX scheme.</p>
</dd></dl>

</section>
<section id="schedulereceive">
<span id="mex-schedulereceive"></span><h3>ScheduleReceive<a class="headerlink" href="#schedulereceive" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;ScheduleReceive&quot;</span></em>, <em class="sig-param"><span class="pre">firing</span></em>, <em class="sig-param"><span class="pre">address</span></em>, <em class="sig-param"><span class="pre">length</span></em>, <em class="sig-param"><span class="pre">startSample</span></em>, <em class="sig-param"><span class="pre">decimation</span></em>, <em class="sig-param"><span class="pre">rxMapId</span></em><span class="sig-paren">)</span></dt>
<dd><p>Schedules a new data transmission from the probe’s adapter to the module’s internal memory.</p>
<p>This function queues a new data transmission from all available RX channels to the device’s internal memory.
Data transfer starts with the next “TriggerStart” operation call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>firing</strong> – a firing, in which this data transmission should apply, <strong>starts from 0</strong></p></li>
<li><p><strong>address</strong> – module’s internal memory address (a number), where RX data should be saved</p></li>
<li><p><strong>length</strong> – number of samples (per 32 channels) to acquire</p></li>
<li><p><strong>startSample</strong> – starting sample (delay from trigger). MUST BE EQUAL FOR ALL FUNTION CALLS (current firmware limitation)</p></li>
<li><p><strong>decimation</strong> – number of samples to skip before writing to memory. MUST BE EQUAL FOR ALL FUNTION CALLS (current firmware limitation)</p></li>
<li><p><strong>rxMapId</strong> – index of the rx channel mapping to be used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="tx-triggers">
<h2>TX Triggers<a class="headerlink" href="#tx-triggers" title="Permalink to this headline">¶</a></h2>
<section id="setntriggers">
<span id="mex-setntriggers"></span><h3>SetNTriggers<a class="headerlink" href="#setntriggers" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetNTriggers&quot;</span></em>, <em class="sig-param"><span class="pre">n</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets the number of triggers to be generated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> – number of triggers to set</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="settrigger">
<span id="mex-settrigger"></span><h3>SetTrigger<a class="headerlink" href="#settrigger" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SetTrigger&quot;</span></em>, <em class="sig-param"><span class="pre">timeToNextTrigger</span></em>, <em class="sig-param"><span class="pre">syncReq</span></em>, <em class="sig-param"><span class="pre">idx</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets parameters of the trigger event.
Each trigger event will generate a trigger signal for the current firing/acquisition and set next firing parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeToNextTrigger</strong> – time between current and the next trigger [uS]</p></li>
<li><p><strong>syncReq</strong> – should the trigger generator pause and wait for the TriggerSync() call</p></li>
<li><p><strong>idx</strong> – a firing, in which the parameters values should apply, <strong>starts from 0</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="enabletransmit">
<span id="mex-enabletransmit"></span><h3>EnableTransmit<a class="headerlink" href="#enabletransmit" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;EnableTransmit&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Enables TX pulse generation.</p>
</dd></dl>

</section>
<section id="enablesequencer">
<span id="mex-enablesequencer"></span><h3>EnableSequencer<a class="headerlink" href="#enablesequencer" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;EnableSequencer&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Enables hardware sequencer.</p>
</dd></dl>

</section>
<section id="triggerstart">
<span id="mex-triggerstart"></span><h3>TriggerStart<a class="headerlink" href="#triggerstart" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;TriggerStart&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Starts generation of the hardware trigger.</p>
</dd></dl>

</section>
<section id="triggerstop">
<span id="mex-triggerstop"></span><h3>TriggerStop<a class="headerlink" href="#triggerstop" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;TriggerStop&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Stops generation of the hardware trigger.</p>
</dd></dl>

</section>
<section id="triggersync">
<span id="mex-triggersync"></span><h3>TriggerSync<a class="headerlink" href="#triggersync" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;TriggerSync&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Resumes generation of the hardware trigger.</p>
</dd></dl>

</section>
<section id="swtrigger">
<span id="mex-swtrigger"></span><h3>SWTrigger<a class="headerlink" href="#swtrigger" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SWTrigger&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Triggers pulse generation and starts RX transmissions on all (master and slave) modules. Should be called only for a master module.
<strong>DEPRECATED:</strong> please use <cite>TriggerStart</cite>, <cite>TriggerSync</cite>, <cite>TriggerStop</cite></p>
</dd></dl>

</section>
<section id="swnexttx">
<span id="mex-swnexttx"></span><h3>SWNextTX<a class="headerlink" href="#swnexttx" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;SWNextTX&quot;</span></em><span class="sig-paren">)</span></dt>
<dd><p>Sets all TX and RX parameters for next firing/acquisition.
<strong>DEPRECATED:</strong> please use <cite>TriggerStart</cite>, <cite>TriggerSync</cite>, <cite>TriggerStop</cite></p>
</dd></dl>

</section>
</section>
<section id="data-transfer-from-device-to-host">
<h2>Data transfer from device to host<a class="headerlink" href="#data-transfer-from-device-to-host" title="Permalink to this headline">¶</a></h2>
<section id="transferrxbuffertohost">
<span id="mex-transferrxbuffertohost"></span><h3>TransferRXBufferToHost<a class="headerlink" href="#transferrxbuffertohost" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;TransferRXBuffertToHost&quot;</span></em>, <em class="sig-param"><span class="pre">srcAddress</span></em>, <em class="sig-param"><span class="pre">length</span></em><span class="sig-paren">)</span></dt>
<dd><p>Transfers data from the given module’s memory address to the computer’s memory, and returns a new MATALB array
of shape (number of RX channels, length)</p>
<p>The resulting data will be of type int16.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srcAddres</strong> – module’s memory address to copy data from</p></li>
<li><p><strong>length</strong> – number of collected samples</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a MATLAB array of shape (number of RX channels, length)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="transferallrxbufferstohost">
<span id="mex-transferallrxbufferstohost"></span><h3>TransferAllRXBuffersToHost<a class="headerlink" href="#transferallrxbufferstohost" title="Permalink to this headline">¶</a></h3>
<dl class="mat function">
<dt>
<code class="sig-name descname"><span class="pre">Us4MEX</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">moduleIndex</span></em>, <em class="sig-param"><span class="pre">&quot;TransferAllRXBuffersToHost&quot;</span></em>, <em class="sig-param"><span class="pre">srcAddresses</span></em>, <em class="sig-param"><span class="pre">lengths</span></em>, <em class="sig-param"><span class="pre">logTime</span></em><span class="sig-paren">)</span></dt>
<dd><p>Transfers data from all available modules to the host’s memory,
and returns a MATLAB array of shape:
(number of RX channels of a single module, sum of lengths).</p>
<p>The resulting array is of data type: int16.</p>
<p>NOTE: the underlying buffer of the result array may be shared between
successive calls of this function, that is, the (j)-th result of
<cite>TransferAllRXBuffersToHost</cite> may use the same memory area as the
result of i-th call, j &gt; i.</p>
<p>IF YOU WANT TO STORE THE RESULT OF THIS FUNCTION SAFELY,
COPY ITS CONTENT TO SEPARATE ARRAY.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>srcAddresses</strong> – an array of addresses to use for modules: 0, 1, etc.</p></li>
<li><p><strong>length</strong> – an array of length to use for modules: 0, 1, etc.</p></li>
<li><p><strong>logTime</strong> – set it to True if you want to print data transfer time</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a MATLAB array of shape (number of RX channels of a single module, sum of lengths)</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, us4us Ltd..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>